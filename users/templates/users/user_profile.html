{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="row">
  <div class="col-md-4">
    <div class="card">
      {% if target.profile_picture %}
      <img src="{{ target.profile_picture.url }}" class="card-img-top" alt="{{ target.username }}">
      {% else %}
      <img src="/media/profile_pics/default_pic.jpeg" class="card-img-top" alt="{{ target.username }}">
      {% endif %}
      <div class="card-body">
        <h4>{{ target.get_full_name|default:target.username }}</h4>
        <p class="text-muted">@{{ target.username }}</p>

        {% if is_friend %}
          <button class="btn btn-secondary" disabled>Friends</button>
        {% elif fr_sent %}
          <form method="post" action="{% url 'users:respond_friend_request' fr_sent.pk 'cancel' %}">{% csrf_token %}
            <button class="btn btn-outline-warning" type="submit">Cancel Request</button>
          </form>
        {% elif fr_received %}
          <div class="d-flex">
            <form method="post" action="{% url 'users:respond_friend_request' fr_received.pk 'accept' %}">{% csrf_token %}
              <button class="btn btn-primary me-2" type="submit">Accept</button>
            </form>
            <form method="post" action="{% url 'users:respond_friend_request' fr_received.pk 'reject' %}">{% csrf_token %}
              <button class="btn btn-danger" type="submit">Reject</button>
            </form>
          </div>
        {% else %}
          <form method="post" action="{% url 'users:send_friend_request' target.pk %}">{% csrf_token %}
            <button class="btn btn-success" type="submit">Add Friend</button>
          </form>
        {% endif %}

      </div>
    </div>
  </div>
  <div class="col-md-8">
    <h4>About</h4>
    <p>No additional profile information.</p>
  </div>
</div>
{% endblock %}
